disease_database = {
    'Tomato___Bacterial_spot': {
        'name': 'Tomato Bacterial Spot',
        'crop': 'Tomato',
        'pathogen': 'Xanthomonas spp.',
        'symptoms': [
            'Small, dark brown spots on leaves',
            'Spots may have yellow halos',
            'Fruit spots are slightly raised',
            'Leaves may turn yellow and drop'
        ],
        'treatment': [
            'Remove and destroy infected plants',
            'Use disease-free seeds and transplants',
            'Apply copper-based bactericides',
            'Avoid overhead irrigation',
            'Rotate crops with non-host plants'
        ],
        'prevention': [
            'Plant resistant varieties',
            'Maintain good air circulation',
            'Keep foliage dry',
            'Practice crop rotation'
        ]
    },
    'Tomato___Early_blight': {
        'name': 'Tomato Early Blight',
        'crop': 'Tomato',
        'pathogen': 'Alternaria solani',
        'symptoms': [
            'Dark brown spots with concentric rings (target-like)',
            'Spots appear on older, lower leaves first',
            'Yellowing around spots',
            'Premature leaf drop'
        ],
        'treatment': [
            'Remove affected leaves',
            'Apply fungicides containing chlorothalonil or mancozeb',
            'Improve air circulation',
            'Mulch around plants to prevent soil splash'
        ],
        'prevention': [
            'Use disease-free seeds',
            'Practice crop rotation (3-4 years)',
            'Water at soil level, avoid wetting foliage',
            'Stake plants for better air flow'
        ]
    },
    'Tomato___Late_blight': {
        'name': 'Tomato Late Blight',
        'crop': 'Tomato',
        'pathogen': 'Phytophthora infestans',
        'symptoms': [
            'Large, greasy-looking spots on leaves',
            'White fuzzy growth on leaf undersides',
            'Brown spots on stems',
            'Rapid plant death in humid conditions'
        ],
        'treatment': [
            'Remove and destroy infected plants immediately',
            'Apply fungicides (chlorothalonil, mancozeb, or copper)',
            'Spray preventatively in cool, wet weather',
            'Destroy all volunteer tomato plants'
        ],
        'prevention': [
            'Plant resistant varieties',
            'Ensure good drainage and air circulation',
            'Avoid overhead watering',
            'Monitor weather for disease-favorable conditions'
        ]
    },
    'Tomato___Leaf_Mold': {
        'name': 'Tomato Leaf Mold',
        'crop': 'Tomato',
        'pathogen': 'Passalora fulva',
        'symptoms': [
            'Pale green or yellowish spots on upper leaf surfaces',
            'Olive-green to gray-brown fuzzy growth on lower surfaces',
            'Older leaves affected first',
            'Severe defoliation in humid conditions'
        ],
        'treatment': [
            'Improve air circulation and reduce humidity',
            'Remove infected leaves',
            'Apply fungicides if necessary',
            'Increase spacing between plants'
        ],
        'prevention': [
            'Grow resistant varieties',
            'Provide adequate plant spacing',
            'Use drip irrigation instead of overhead watering',
            'Ensure good greenhouse ventilation'
        ]
    },
    'Tomato___Septoria_leaf_spot': {
        'name': 'Tomato Septoria Leaf Spot',
        'crop': 'Tomato',
        'pathogen': 'Septoria lycopersici',
        'symptoms': [
            'Small circular spots with gray centers',
            'Dark brown margins around spots',
            'Tiny black specks (fruiting bodies) in spot centers',
            'Lower leaves affected first'
        ],
        'treatment': [
            'Remove and destroy infected leaves',
            'Apply fungicides (chlorothalonil, mancozeb)',
            'Mulch to prevent soil splash',
            'Remove plant debris at season end'
        ],
        'prevention': [
            'Use disease-free transplants',
            'Rotate crops for 3 years',
            'Space plants properly for air flow',
            'Water at base of plants'
        ]
    },
    'Tomato___Spider_mites Two-spotted_spider_mite': {
        'name': 'Tomato Spider Mites',
        'crop': 'Tomato',
        'pathogen': 'Two-spotted spider mite',
        'symptoms': [
            'Tiny yellow or white spots on leaves (stippling)',
            'Fine webbing on undersides of leaves',
            'Leaves turn bronze or brown',
            'Severe infestations cause leaf drop'
        ],
        'treatment': [
            'Spray plants with water to dislodge mites',
            'Apply insecticidal soap or neem oil',
            'Use miticides if infestation is severe',
            'Introduce beneficial predatory mites'
        ],
        'prevention': [
            'Keep plants well-watered (stressed plants are susceptible)',
            'Avoid excessive nitrogen fertilization',
            'Monitor plants regularly',
            'Remove heavily infested plants'
        ]
    },
    'Tomato___Target_Spot': {
        'name': 'Tomato Target Spot',
        'crop': 'Tomato',
        'pathogen': 'Corynespora cassiicola',
        'symptoms': [
            'Brown spots with concentric rings',
            'Spots enlarge and coalesce',
            'Affects leaves, stems, and fruit',
            'Defoliation in severe cases'
        ],
        'treatment': [
            'Remove infected plant parts',
            'Apply fungicides (azoxystrobin, chlorothalonil)',
            'Improve air circulation',
            'Reduce leaf wetness duration'
        ],
        'prevention': [
            'Use resistant varieties if available',
            'Practice crop rotation',
            'Avoid overhead irrigation',
            'Maintain proper plant spacing'
        ]
    },
    'Tomato___Tomato_Yellow_Leaf_Curl_Virus': {
        'name': 'Tomato Yellow Leaf Curl Virus',
        'crop': 'Tomato',
        'pathogen': 'Begomovirus (transmitted by whiteflies)',
        'symptoms': [
            'Upward curling of leaves',
            'Yellowing of leaf margins',
            'Stunted plant growth',
            'Reduced fruit production'
        ],
        'treatment': [
            'Remove and destroy infected plants',
            'Control whitefly populations with insecticides',
            'Use yellow sticky traps for whiteflies',
            'No cure once infected'
        ],
        'prevention': [
            'Plant virus-resistant varieties',
            'Use reflective mulches to repel whiteflies',
            'Install insect-proof screens in greenhouses',
            'Remove weeds that harbor whiteflies'
        ]
    },
    'Tomato___Tomato_mosaic_virus': {
        'name': 'Tomato Mosaic Virus',
        'crop': 'Tomato',
        'pathogen': 'Tobamovirus',
        'symptoms': [
            'Mottled light and dark green on leaves',
            'Distorted, fern-like leaves',
            'Stunted growth',
            'Reduced fruit quality and yield'
        ],
        'treatment': [
            'Remove and destroy infected plants',
            'Disinfect tools and hands',
            'No chemical cure available',
            'Control aphids if present'
        ],
        'prevention': [
            'Use virus-free seeds and transplants',
            'Plant resistant varieties',
            'Sanitize tools between plants',
            'Wash hands before handling plants'
        ]
    },
    'Tomato___healthy': {
        'name': 'Healthy Tomato Plant',
        'crop': 'Tomato',
        'pathogen': 'None',
        'symptoms': [
            'Vibrant green leaves',
            'No spots or discoloration',
            'Vigorous growth',
            'No signs of pests or disease'
        ],
        'treatment': [
            'No treatment needed',
            'Continue regular care and monitoring'
        ],
        'prevention': [
            'Maintain good cultural practices',
            'Monitor regularly for early disease detection',
            'Ensure proper nutrition and watering',
            'Keep garden clean and debris-free'
        ]
    },
    'Potato___Early_blight': {
        'name': 'Potato Early Blight',
        'crop': 'Potato',
        'pathogen': 'Alternaria solani',
        'symptoms': [
            'Brown spots with concentric rings on leaves',
            'Yellowing around spots',
            'Lower leaves affected first',
            'Dark sunken lesions on tubers'
        ],
        'treatment': [
            'Remove infected foliage',
            'Apply fungicides (chlorothalonil, mancozeb)',
            'Improve air circulation',
            'Hill soil around plants'
        ],
        'prevention': [
            'Use certified disease-free seed potatoes',
            'Practice 3-4 year crop rotation',
            'Avoid overhead irrigation',
            'Destroy crop debris after harvest'
        ]
    },
    'Potato___Late_blight': {
        'name': 'Potato Late Blight',
        'crop': 'Potato',
        'pathogen': 'Phytophthora infestans',
        'symptoms': [
            'Water-soaked spots on leaves',
            'White fuzzy growth on undersides',
            'Rapid blackening of foliage',
            'Brown rot in tubers'
        ],
        'treatment': [
            'Apply fungicides preventatively',
            'Remove and destroy infected plants',
            'Harvest tubers before infection spreads',
            'Destroy cull piles'
        ],
        'prevention': [
            'Plant resistant varieties',
            'Use certified seed potatoes',
            'Ensure good drainage',
            'Monitor weather for favorable disease conditions'
        ]
    },
    'Potato___healthy': {
        'name': 'Healthy Potato Plant',
        'crop': 'Potato',
        'pathogen': 'None',
        'symptoms': [
            'Dark green foliage',
            'No spots or lesions',
            'Normal growth pattern',
            'No wilting or discoloration'
        ],
        'treatment': [
            'No treatment needed',
            'Continue standard care practices'
        ],
        'prevention': [
            'Use quality seed potatoes',
            'Maintain proper soil nutrition',
            'Practice crop rotation',
            'Monitor for early disease signs'
        ]
    },
    'Corn_(maize)___Cercospora_leaf_spot Gray_leaf_spot': {
        'name': 'Corn Gray Leaf Spot',
        'crop': 'Corn (Maize)',
        'pathogen': 'Cercospora zeae-maydis',
        'symptoms': [
            'Rectangular gray to tan lesions',
            'Lesions parallel to leaf veins',
            'Lesions may have yellow halos',
            'Severe defoliation reduces yield'
        ],
        'treatment': [
            'Apply foliar fungicides if economically justified',
            'Rotate to non-host crops',
            'Remove crop residue',
            'Plant resistant hybrids'
        ],
        'prevention': [
            'Use resistant corn hybrids',
            'Practice crop rotation',
            'Bury crop residue through tillage',
            'Monitor fields regularly'
        ]
    },
    'Corn_(maize)___Common_rust': {
        'name': 'Corn Common Rust',
        'crop': 'Corn (Maize)',
        'pathogen': 'Puccinia sorghi',
        'symptoms': [
            'Circular to elongated reddish-brown pustules',
            'Pustules on both leaf surfaces',
            'Pustules rupture and release spores',
            'Premature leaf death in severe cases'
        ],
        'treatment': [
            'Apply fungicides if infection is severe before tasseling',
            'Usually doesn\'t require treatment in resistant varieties',
            'Monitor disease progression'
        ],
        'prevention': [
            'Plant resistant hybrids',
            'Early planting may avoid infection',
            'Balanced fertilization',
            'No tillage practices help reduce inoculum'
        ]
    },
    'Corn_(maize)___Northern_Leaf_Blight': {
        'name': 'Corn Northern Leaf Blight',
        'crop': 'Corn (Maize)',
        'pathogen': 'Exserohilum turcicum',
        'symptoms': [
            'Long, elliptical gray-green to tan lesions',
            'Lesions 1-6 inches long',
            'Lesions develop dark gray sporulation',
            'Severe infection causes premature death'
        ],
        'treatment': [
            'Apply fungicides at early infection stages',
            'Scout fields regularly',
            'Consider treatment if disease appears before tasseling'
        ],
        'prevention': [
            'Plant resistant hybrids',
            'Practice crop rotation',
            'Bury crop debris',
            'Maintain balanced soil fertility'
        ]
    },
    'Corn_(maize)___healthy': {
        'name': 'Healthy Corn Plant',
        'crop': 'Corn (Maize)',
        'pathogen': 'None',
        'symptoms': [
            'Uniform green color',
            'No lesions or spots',
            'Normal growth and development',
            'Strong stalks and healthy ears'
        ],
        'treatment': [
            'No treatment needed',
            'Continue regular monitoring'
        ],
        'prevention': [
            'Maintain proper fertilization',
            'Ensure adequate water',
            'Practice crop rotation',
            'Scout for pests and diseases regularly'
        ]
    }
}

def get_disease_info(predicted_class):
    """Get detailed information about the predicted disease"""
    return disease_database.get(predicted_class, {
        'name': 'Unknown Disease',
        'crop': 'Unknown',
        'pathogen': 'Unknown',
        'symptoms': ['Information not available'],
        'treatment': ['Consult an agricultural expert'],
        'prevention': ['Follow general plant health practices']
    })

def parse_disease_name(class_name):
    """Parse the class name to extract crop and disease"""
    parts = class_name.split('___')
    if len(parts) == 2:
        crop = parts[0].replace('_', ' ')
        disease = parts[1].replace('_', ' ')
        return crop, disease
    return 'Unknown', 'Unknown'
